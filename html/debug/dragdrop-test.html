<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag & Drop Exercises Test Suite | Debug</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/textbook.css">
    <link rel="stylesheet" href="../assets/css/callouts.css">
    
    <style>
        .debug-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .debug-section {
            margin: 40px 0;
            padding: 20px;
            border-left: 4px solid #28a745;
            background: #f8f9fa;
        }
        
        .test-container {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: white;
            position: relative;
            z-index: 1;
        }
        
        .error-log {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #c62828;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .success-log {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .test-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            z-index: 10;
        }
        
        .test-button:hover {
            background: #218838;
        }
        
        .debug-info {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .component-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin: 5px;
        }
        
        .status-loaded { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .status-pending { background: #fff3cd; color: #856404; }
        
        .exercise-test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .exercise-test-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: white;
            position: relative;
            z-index: 1;
        }
        
        .test-result {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }

        .exercise-container {
            min-height: 400px;
            margin: 15px 0;
            border: 1px solid #eee;
            border-radius: 6px;
            background: #fafafa;
            position: relative;
            z-index: 2;
        }
        
        /* Ensure test buttons appear above exercises */
        .debug-panel {
            position: relative;
            z-index: 15;
        }
        
        .exercise-controls {
            position: relative;
            z-index: 10;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="container">
            <h1>🎯 Drag & Drop Exercises Test Suite</h1>
            <p>Comprehensive testing and debugging for interactive drag & drop exercises</p>
        </div>
    </header>

    <main id="main-content" class="main-content">
        <div class="container">
            <div class="content-wrapper">
                <div class="main-content-area">
                    
                    <!-- Debug Information Panel -->
                    <div class="debug-panel">
                        <h2>🚨 Debug Information</h2>
                        <div id="system-info"></div>
                        <div id="component-status"></div>
                        <div id="error-console"></div>
                        
                        <h3>Quick Test Actions</h3>
                        <button class="test-button" onclick="runAllDragDropTests()">Run All Tests</button>
                        <button class="test-button" onclick="clearLogs()">Clear Logs</button>
                        <button class="test-button" onclick="exportDebugInfo()">Export Debug Info</button>
                        <button class="test-button" onclick="testDragDropSystem()">Test Drag Drop System</button>
                        <button class="test-button" onclick="testAllExerciseTypes()">Test All Exercise Types</button>
                        <button class="test-button" onclick="testInteractivity()">Test Interactivity</button>
                        <button class="test-button" onclick="resetAllExercises()">Reset All Exercises</button>
                    </div>

                    <!-- Test Section 1: Drag Drop System -->
                    <div class="debug-section">
                        <h2>Test 1: Drag & Drop System Loading</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test drag-drop-exercises.js loading and initialization<br>
                            <strong>Expected:</strong> DragDropExercises namespace loads with all exercise types available
                        </div>
                        
                        <div class="test-container">
                            <h3>System Status</h3>
                            <div id="dragdrop-status"></div>
                            
                            <div class="debug-panel">
                                <h4>System Test Actions:</h4>
                                <button class="test-button" onclick="testDragDropLoading()">Check DragDrop Loading</button>
                                <button class="test-button" onclick="testExerciseTypes()">Test Exercise Types</button>
                                <button class="test-button" onclick="testEventHandlers()">Test Event Handlers</button>
                                <button class="test-button" onclick="testDragDropAPI()">Test DragDrop API</button>
                                
                                <div id="dragdrop-test-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Section 2: Account Categorization Exercise -->
                    <div class="debug-section">
                        <h2>Test 2: Account Categorization Exercise</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test account categorization drag & drop with accounting equation<br>
                            <strong>Expected:</strong> Draggable accounts, drop zones, validation, and scoring system
                        </div>
                        
                        <div class="exercise-test-grid">
                            <div class="exercise-test-item">
                                <h4>Account Categorization Test</h4>
                                <div class="exercise-container" id="account-categorization-test"></div>
                                <button class="test-button" onclick="testAccountCategorization()">Test Account Categorization</button>
                                <div id="account-categorization-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Section 3: Journal Entry Builder -->
                    <div class="debug-section">
                        <h2>Test 3: Journal Entry Builder Exercise</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test journal entry creation with account drag & drop and amount inputs<br>
                            <strong>Expected:</strong> Account bank, journal table, balance validation, and scenario-based testing
                        </div>
                        
                        <div class="exercise-test-grid">
                            <div class="exercise-test-item">
                                <h4>Journal Entry Builder Test</h4>
                                <div class="exercise-container" id="journal-entry-test"></div>
                                <button class="test-button" onclick="testJournalEntryBuilder()">Test Journal Entry Builder</button>
                                <div id="journal-entry-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Section 4: Trial Balance Sort -->
                    <div class="debug-section">
                        <h2>Test 4: Trial Balance Sort Exercise</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test trial balance organization with debit/credit sorting<br>
                            <strong>Expected:</strong> Account sorting, balance calculations, and equilibrium checking
                        </div>
                        
                        <div class="exercise-test-grid">
                            <div class="exercise-test-item">
                                <h4>Trial Balance Sort Test</h4>
                                <div class="exercise-container" id="trial-balance-test"></div>
                                <button class="test-button" onclick="testTrialBalanceSort()">Test Trial Balance Sort</button>
                                <div id="trial-balance-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Section 5: Exercise Validation & Scoring -->
                    <div class="debug-section">
                        <h2>Test 5: Exercise Validation & Scoring</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test validation logic, scoring algorithms, and feedback systems<br>
                            <strong>Expected:</strong> Correct answer detection, scoring calculations, and user feedback
                        </div>
                        
                        <div class="test-container">
                            <h3>Validation Testing</h3>
                            
                            <div class="debug-panel">
                                <h4>Validation Test Actions:</h4>
                                <button class="test-button" onclick="testValidationLogic()">Test Validation Logic</button>
                                <button class="test-button" onclick="testScoringSystem()">Test Scoring System</button>
                                <button class="test-button" onclick="testFeedbackSystem()">Test Feedback System</button>
                                <button class="test-button" onclick="testResetFunctionality()">Test Reset Functionality</button>
                                <button class="test-button" onclick="testHintSystem()">Test Hint System</button>
                                
                                <div id="validation-test-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Test Section 6: Performance & Accessibility -->
                    <div class="debug-section">
                        <h2>Test 6: Performance & Accessibility Tests</h2>
                        <div class="debug-info">
                            <strong>Purpose:</strong> Test performance with multiple exercises and accessibility features<br>
                            <strong>Expected:</strong> Good performance, proper ARIA labels, keyboard navigation support
                        </div>
                        
                        <div class="test-container">
                            <h3>Performance & Accessibility Testing</h3>
                            
                            <div class="debug-panel">
                                <h4>Performance Test Actions:</h4>
                                <button class="test-button" onclick="testMultipleExercises()">Create Multiple Exercises</button>
                                <button class="test-button" onclick="testExerciseCleanup()">Test Exercise Cleanup</button>
                                <button class="test-button" onclick="testMemoryUsage()">Monitor Memory Usage</button>
                                <button class="test-button" onclick="testAccessibility()">Test Accessibility</button>
                                <button class="test-button" onclick="testKeyboardNavigation()">Test Keyboard Navigation</button>
                                <button class="test-button" onclick="testMobileResponsiveness()">Test Mobile Responsiveness</button>
                                
                                <div id="performance-test-results" class="test-result"></div>
                                <div id="accessibility-results" class="test-result"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Comprehensive Testing Section -->
                    <div class="debug-section">
                        <h2>🧪 Comprehensive Test Results</h2>
                        <div id="comprehensive-results"></div>
                        
                        <div class="debug-panel">
                            <h3>DragDrop System Integration</h3>
                            <div id="dragdrop-integration"></div>
                            
                            <h3>Exercise Performance</h3>
                            <div id="exercise-performance"></div>
                            
                            <h3>Browser Compatibility</h3>
                            <div id="browser-compatibility"></div>
                        </div>
                    </div>

                    <!-- Error Log Section -->
                    <div class="debug-section">
                        <h2>🐛 Error Log & Console Output</h2>
                        <div id="error-log" class="error-log">No errors logged yet...</div>
                        
                        <h3>Test Results Summary</h3>
                        <button class="test-button" onclick="generateTestSummary()">Generate Test Summary</button>
                        <button class="test-button" onclick="generateFullDebugData()">Generate Full Debug Data</button>
                        
                        <div class="debug-panel">
                            <h4>Test Results (Copy/Paste Ready)</h4>
                            <textarea id="test-results-output" style="width: 100%; height: 200px; font-family: monospace; font-size: 12px;" readonly placeholder="Click 'Generate Test Summary' to see results here..."></textarea>
                        </div>
                        
                        <div class="debug-panel">
                            <h4>Full Debug Data (JSON)</h4>
                            <textarea id="debug-data-output" style="width: 100%; height: 300px; font-family: monospace; font-size: 11px;" readonly placeholder="Click 'Generate Full Debug Data' to see JSON data here..."></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script src="../assets/js/drag-drop-exercises.js"></script>
    
    <script>
        // Debug logging system
        let debugLog = [];
        let testResults = {};
        let performanceMetrics = {};
        let localDragDropInstances = {};

        function logDebug(type, message) {
            const timestamp = new Date().toISOString();
            debugLog.push({ type, message, timestamp });
            
            const errorLog = document.getElementById('error-log');
            if (errorLog) {
                errorLog.textContent = debugLog.map(log => 
                    `[${log.timestamp}] ${log.type}: ${log.message}`
                ).join('\n');
                errorLog.scrollTop = errorLog.scrollHeight;
            }
        }

        function clearLogs() {
            debugLog = [];
            document.getElementById('error-log').textContent = 'Logs cleared...';
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            logDebug('LOG', 'DragDrop debug page loaded, initializing...');
            updateSystemInfo();
            updateComponentStatus();
            
            setTimeout(() => {
                logDebug('LOG', 'Initial setup completed');
            }, 2000);
        });

        function updateSystemInfo() {
            const systemInfo = document.getElementById('system-info');
            const info = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenResolution: `${screen.width}x${screen.height}`,
                windowSize: `${window.innerWidth}x${window.innerHeight}`,
                memoryInfo: navigator.deviceMemory ? `${navigator.deviceMemory}GB` : 'Not available',
                timestamp: new Date().toISOString()
            };
            
            systemInfo.innerHTML = `
                <h4>System Information</h4>
                <small>
                    Browser: ${info.userAgent}<br>
                    Platform: ${info.platform}<br>
                    Language: ${info.language}<br>
                    Screen: ${info.screenResolution}<br>
                    Window: ${info.windowSize}<br>
                    Memory: ${info.memoryInfo}<br>
                    Timestamp: ${info.timestamp}
                </small>
            `;
        }

        function updateComponentStatus() {
            const statusDiv = document.getElementById('component-status');
            let statusHTML = '<h4>Component Status</h4>';
            
            // Check DragDropExercises
            const components = [
                { name: 'DragDropExercises', obj: window.DragDropExercises },
                { name: 'dragDropInstances', obj: window.dragDropInstances },
                { name: 'createDragDropExercise', obj: window.DragDropExercises?.createDragDropExercise },
                { name: 'createAccountCategorizationExercise', obj: window.DragDropExercises?.createAccountCategorizationExercise },
                { name: 'createJournalEntryBuilderExercise', obj: window.DragDropExercises?.createJournalEntryBuilderExercise },
                { name: 'createTrialBalanceSortExercise', obj: window.DragDropExercises?.createTrialBalanceSortExercise }
            ];
            
            components.forEach(component => {
                const status = component.obj ? 'LOADED' : 'NOT LOADED';
                const statusClass = component.obj ? 'status-loaded' : 'status-error';
                statusHTML += `<span class="component-status ${statusClass}">${component.name}: ${status}</span><br>`;
            });
            
            statusDiv.innerHTML = statusHTML;
        }
        
        // DragDrop system tests
        function testDragDropLoading() {
            const results = [];
            
            if (window.DragDropExercises) {
                results.push('✓ DragDropExercises namespace loaded');
                
                const methods = [
                    'createDragDropExercise',
                    'createAccountCategorizationExercise', 
                    'createJournalEntryBuilderExercise',
                    'createTrialBalanceSortExercise'
                ];
                
                // Also check for the missing exercise functions
                const missingMethods = [
                    'createCashFlowSequenceExercise',
                    'createFinancialStatementBuilderExercise'
                ];
                
                methods.forEach(method => {
                    if (typeof window.DragDropExercises[method] === 'function') {
                        results.push(`✓ ${method} method available`);
                    } else {
                        results.push(`✗ ${method} method missing`);
                    }
                });
                
                // Check for missing methods that are referenced but not implemented
                missingMethods.forEach(method => {
                    if (typeof window[method] === 'function') {
                        results.push(`⚠ ${method} found globally`);
                    } else {
                        results.push(`ℹ ${method} not implemented (expected)`);
                    }
                });
                
            } else {
                results.push('✗ DragDropExercises not loaded');
            }
            
            document.getElementById('dragdrop-test-results').innerHTML = results.join('<br>');
            testResults.dragdrop_loading = results;
        }
        
        function testExerciseTypes() {
            const results = [];
            // Only test implemented exercise types
            const exerciseTypes = [
                'categorize-accounts',
                'journal-entry-builder', 
                'trial-balance-sort'
            ];
            
            if (!window.DragDropExercises) {
                results.push('✗ DragDropExercises not available for testing');
                return;
            }
            
            exerciseTypes.forEach(type => {
                try {
                    // Create a temporary container to test
                    const testContainer = document.createElement('div');
                    testContainer.style.display = 'none';
                    document.body.appendChild(testContainer);
                    
                    window.DragDropExercises.createDragDropExercise(testContainer, type, `test-${type}`);
                    
                    // Check if the exercise was actually created correctly
                    const hasContent = testContainer.innerHTML.trim().length > 0;
                    const hasExpectedClass = testContainer.querySelector('.drag-drop-container');
                    
                    if (hasContent && hasExpectedClass) {
                        results.push(`✓ ${type} exercise type works`);
                    } else {
                        results.push(`⚠ ${type} exercise type created but may have issues`);
                    }
                    
                    // Clean up
                    document.body.removeChild(testContainer);
                    
                } catch (error) {
                    results.push(`✗ ${type} exercise type failed: ${error.message}`);
                    logDebug('ERROR', `Exercise creation failed: ${error.message}`);
                }
            });
            
            document.getElementById('dragdrop-test-results').innerHTML += '<br><strong>Exercise Type Tests:</strong><br>' + results.join('<br>');
            testResults.exercise_types = results;
        }
        
        function testEventHandlers() {
            const results = [];
            
            // Test if global functions exist
            const globalFunctions = [
                'checkAccountCategorization',
                'resetAccountCategorization', 
                'showAccountHints',
                'removeDroppedItem'
            ];
            
            globalFunctions.forEach(func => {
                if (typeof window[func] === 'function') {
                    results.push(`✓ ${func} function available`);
                } else {
                    results.push(`✗ ${func} function missing`);
                }
            });
            
            document.getElementById('dragdrop-test-results').innerHTML += '<br><strong>Event Handler Tests:</strong><br>' + results.join('<br>');
            testResults.event_handlers = results;
        }
        
        function testDragDropAPI() {
            const results = [];
            
            // Test drag and drop API support
            const dragDropTests = [
                {name: 'HTML5 Drag API', test: () => 'draggable' in document.createElement('div')},
                {name: 'DataTransfer API', test: () => typeof DataTransfer !== 'undefined'},
                {name: 'DragEvent API', test: () => typeof DragEvent !== 'undefined'},
                {name: 'Touch Events', test: () => 'ontouchstart' in window}
            ];
            
            dragDropTests.forEach(test => {
                try {
                    if (test.test()) {
                        results.push(`✓ ${test.name} supported`);
                    } else {
                        results.push(`✗ ${test.name} not supported`);
                    }
                } catch (error) {
                    results.push(`✗ ${test.name} error: ${error.message}`);
                }
            });
            
            document.getElementById('dragdrop-test-results').innerHTML += '<br><strong>API Tests:</strong><br>' + results.join('<br>');
            testResults.dragdrop_api = results;
        }
        
        // Exercise testing functions
        function testAccountCategorization() {
            const container = document.getElementById('account-categorization-test');
            const results = testExerciseContainer(container, 'categorize-accounts', 'account-categorization');
            document.getElementById('account-categorization-results').innerHTML = results.join('<br>');
            testResults.account_categorization = results;
        }
        
        function testJournalEntryBuilder() {
            const container = document.getElementById('journal-entry-test');
            const results = testExerciseContainer(container, 'journal-entry-builder', 'journal-entry');
            document.getElementById('journal-entry-results').innerHTML = results.join('<br>');
            testResults.journal_entry = results;
        }
        
        function testTrialBalanceSort() {
            const container = document.getElementById('trial-balance-test');
            const results = testExerciseContainer(container, 'trial-balance-sort', 'trial-balance');
            document.getElementById('trial-balance-results').innerHTML = results.join('<br>');
            testResults.trial_balance = results;
        }
        
        function testExerciseContainer(container, exerciseType, exerciseId) {
            const results = [];
            
            if (!container) {
                results.push('✗ Exercise container not found');
                return results;
            }
            
            results.push('✓ Exercise container found');
            
            // Clear container
            container.innerHTML = '';
            
            if (!window.DragDropExercises) {
                results.push('✗ DragDropExercises not available');
                return results;
            }
            
            try {
                // Create exercise
                window.DragDropExercises.createDragDropExercise(container, exerciseType, exerciseId);
                results.push(`✓ ${exerciseType} exercise created`);
                
                // Check for expected elements
                setTimeout(() => {
                    const draggableItems = container.querySelectorAll('[draggable="true"]');
                    const dropZones = container.querySelectorAll('.drop-zone');
                    const controls = container.querySelectorAll('button');
                    
                    results.push(`✓ Found ${draggableItems.length} draggable items`);
                    results.push(`✓ Found ${dropZones.length} drop zones`);
                    results.push(`✓ Found ${controls.length} control buttons`);
                    
                    // Check exercise registration
                    if (window.dragDropInstances && window.dragDropInstances[exerciseId]) {
                        results.push('✓ Exercise registered in global instances');
                        const instance = window.dragDropInstances[exerciseId];
                        results.push(`Exercise type: ${instance.type}`);
                        results.push(`Attempts: ${instance.attempts}`);
                        results.push(`Completed: ${instance.completed}`);
                    } else {
                        results.push('✗ Exercise not registered in global instances');
                    }
                    
                    // Update results display
                    const resultsContainer = document.getElementById(`${exerciseType.replace('-', '-')}-results`);
                    if (resultsContainer) {
                        resultsContainer.innerHTML = results.join('<br>');
                    }
                    
                }, 500);
                
            } catch (error) {
                results.push(`✗ Error creating ${exerciseType}: ${error.message}`);
                logDebug('ERROR', `Exercise creation failed: ${error.message}`);
            }
            
            return results;
        }
        
        // Comprehensive test functions
        function runAllDragDropTests() {
            logDebug('LOG', 'Starting comprehensive drag drop test suite...');
            
            setTimeout(() => testDragDropLoading(), 100);
            setTimeout(() => testExerciseTypes(), 200);
            setTimeout(() => testEventHandlers(), 300);
            setTimeout(() => testDragDropAPI(), 400);
            setTimeout(() => testAccountCategorization(), 500);
            setTimeout(() => testJournalEntryBuilder(), 600);
            setTimeout(() => testTrialBalanceSort(), 700);
            setTimeout(() => testValidationLogic(), 800);
            setTimeout(() => testScoringSystem(), 900);
        }
        
        function testDragDropSystem() {
            testDragDropLoading();
            setTimeout(() => testExerciseTypes(), 100);
            setTimeout(() => testEventHandlers(), 200);
            setTimeout(() => testDragDropAPI(), 300);
        }
        
        function testAllExerciseTypes() {
            testAccountCategorization();
            setTimeout(() => testJournalEntryBuilder(), 100);
            setTimeout(() => testTrialBalanceSort(), 200);
        }
        
        function testInteractivity() {
            // Test drag and drop interactions
            // This would simulate drag events and test responses
            const results = ['Interactivity testing started...'];
            document.getElementById('validation-test-results').innerHTML = results.join('<br>');
        }
        
        function resetAllExercises() {
            // Reset all exercise containers
            const containers = ['account-categorization-test', 'journal-entry-test', 'trial-balance-test'];
            containers.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    container.innerHTML = '';
                }
            });
            logDebug('LOG', 'All exercises reset');
        }
        
        // Validation and scoring tests
        function testValidationLogic() {
            const results = ['Validation logic testing started...'];
            document.getElementById('validation-test-results').innerHTML = results.join('<br>');
        }
        
        function testScoringSystem() {
            const results = ['Scoring system testing started...'];
            document.getElementById('validation-test-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        function testFeedbackSystem() {
            const results = ['Feedback system testing started...'];
            document.getElementById('validation-test-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        function testResetFunctionality() {
            const results = ['Reset functionality testing started...'];
            document.getElementById('validation-test-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        function testHintSystem() {
            const results = ['Hint system testing started...'];
            document.getElementById('validation-test-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        // Performance and accessibility tests
        function testMultipleExercises() {
            const results = ['Multiple exercises performance test started...'];
            document.getElementById('performance-test-results').innerHTML = results.join('<br>');
        }
        
        function testExerciseCleanup() {
            const results = ['Exercise cleanup test started...'];
            document.getElementById('performance-test-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        function testMemoryUsage() {
            const results = [];
            if (performance.memory) {
                results.push(`Used JS Heap: ${(performance.memory.usedJSHeapSize / 1048576).toFixed(2)}MB`);
                results.push(`Total JS Heap: ${(performance.memory.totalJSHeapSize / 1048576).toFixed(2)}MB`);
                results.push(`Heap Limit: ${(performance.memory.jsHeapSizeLimit / 1048576).toFixed(2)}MB`);
            } else {
                results.push('Memory info not available');
            }
            document.getElementById('performance-test-results').innerHTML += '<br><strong>Memory Usage:</strong><br>' + results.join('<br>');
        }
        
        function testAccessibility() {
            const results = ['Accessibility testing started...'];
            document.getElementById('accessibility-results').innerHTML = results.join('<br>');
        }
        
        function testKeyboardNavigation() {
            const results = ['Keyboard navigation testing started...'];
            document.getElementById('accessibility-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        function testMobileResponsiveness() {
            const results = ['Mobile responsiveness testing started...'];
            document.getElementById('accessibility-results').innerHTML += '<br>' + results.join('<br>');
        }
        
        // Display functions for test results
        function generateTestSummary() {
            const summary = [];
            summary.push('=== DRAG & DROP EXERCISES TEST SUMMARY ===');
            summary.push(`Timestamp: ${new Date().toISOString()}`);
            summary.push(`Platform: ${navigator.platform}`);
            summary.push(`Browser: ${navigator.userAgent.split(' ').slice(-2).join(' ')}`);
            summary.push('');
            
            // System Status
            summary.push('SYSTEM STATUS:');
            summary.push(`✓ DragDropExercises: ${window.DragDropExercises ? 'LOADED' : 'NOT LOADED'}`);
            summary.push(`✓ dragDropInstances: ${window.dragDropInstances ? 'AVAILABLE' : 'NOT AVAILABLE'}`);
            summary.push('');
            
            // Test Results
            summary.push('TEST RESULTS:');
            Object.keys(testResults).forEach(testName => {
                summary.push(`\n${testName.toUpperCase().replace(/_/g, ' ')}:`);
                testResults[testName].forEach(result => {
                    summary.push(`  ${result}`);
                });
            });
            
            // Error Summary
            const errors = debugLog.filter(log => log.type === 'ERROR');
            summary.push('\nERROR SUMMARY:');
            if (errors.length === 0) {
                summary.push('  No errors detected');
            } else {
                errors.forEach(error => {
                    summary.push(`  ❌ ${error.message}`);
                });
            }
            
            // Performance
            summary.push('\nPERFORMACE METRICS:');
            if (Object.keys(performanceMetrics).length === 0) {
                summary.push('  No performance data collected');
            } else {
                Object.keys(performanceMetrics).forEach(metric => {
                    summary.push(`  ${metric}: ${performanceMetrics[metric].toFixed(2)}ms`);
                });
            }
            
            summary.push('\n=== END TEST SUMMARY ===');
            
            document.getElementById('test-results-output').value = summary.join('\n');
        }
        
        function generateFullDebugData() {
            const data = {
                systemInfo: {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language,
                    screenResolution: `${screen.width}x${screen.height}`,
                    windowSize: `${window.innerWidth}x${window.innerHeight}`,
                    timestamp: new Date().toISOString()
                },
                testResults: testResults,
                performanceMetrics: performanceMetrics,
                debugLog: debugLog,
                dragDropInstances: window.dragDropInstances || {},
                componentStatus: {
                    DragDropExercises: !!window.DragDropExercises,
                    dragDropInstancesGlobal: !!window.dragDropInstances,
                    availableMethods: window.DragDropExercises ? Object.keys(window.DragDropExercises) : []
                }
            };
            
            document.getElementById('debug-data-output').value = JSON.stringify(data, null, 2);
            console.log('DragDrop Test Results:', data);
        }
    </script>
</body>
</html>